<%@page import="kr.or.ddit.admin.vo.AdminVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	AdminVO vo = (AdminVO) request.getAttribute("vo");
%>
<html>
<head>
<meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="../../../js/jquery-3.6.0.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <script src="../../../js/jquery.serializejson.min.js"></script>
<script>
$(function(){
	$('#passwordReset').on('click',  function(){
		memid = "<%=vo.getMem_id()%>";
		$.ajax({
			url: '/ShareProject/PasswordReset.do',
			type: 'post',
			data: {'memid' : memid},
			dataType: 'json',
			success: function(res){
				alert("비밀번호가 초기화 되었습니다.");
				location.reload();
			},
			error: function(xhr){
				alert(xhr.status);
			}
		})
	})
	
	$('#updateMember').on('click', function(){
		memid = '<%=vo.getMem_id()%>';
		
		name = '<%=vo.getMem_name()%>';
		
		addr1 = '<%=vo.getMem_addr1()%>';
		
		addr2 = '<%=vo.getMem_addr2()%>';
		
		memhp = '<%=vo.getMem_hp()%>';
		
		$('#updateMemberModal .updatememid').val(memid);
		$('#updateMemberModal .updatename').val(name);
		$('#updateMemberModal .updateaddr1').val(addr1);
		$('#updateMemberModal .updateaddr2').val(addr2);
		$('#updateMemberModal .updatehp').val(memhp);
		$('#updateMemberModal').modal('show');
		
		$(document).on('click', '#bupdate', function(){
			datas = $('#updateMemberModal form').serialize();
			$.ajax({
				url: '/ShareProject/UpdateMember.do',
				data: datas,
				type: 'post',
				dataType: 'json',
				success:function(res){
					$('#updateMemberModal .fin').val("");
					$('#updateMemberModal').modal('hide');
					location.reload();
				},
				error: function(xhr){
					alert(xhr.status);
				}
			})
		})
	})
})
</script>
</head>
<body>
<h2>회원 정보 상세 조회</h2>
<div>
	<input id="passwordReset" type="button" value="비밀번호 초기화">
	<input id="updateMember" type="button" value="회원정보 수정">
	<br>
	<br>
	반: <%= vo.getClass_name() %> &nbsp;&nbsp;  구분: <%= vo.getMem_group() %>
	<br>
	이름: <%= vo.getMem_name() %> &nbsp;&nbsp;&nbsp; 생년월일: <%= vo.getBirth() %>
	<br>
	주소: <%= vo.getMem_addr1() %> &nbsp; <%= vo.getMem_addr2() %>
	<br>
	연락처: <%= vo.getMem_hp() %>
	<br>
	<input onclick="history.go(-1);" type="button" value="뒤로가기">
</div>


<!-- Modal -->
<div id="updateMemberModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">회원 정보 수정</h4>
      </div>
      <div class="modal-body">
         <h3>^_^</h3>
           <form action="/ShareProject/UpdateMember.do" method="post">
         	  <br>
         	  <label>이름</label>
         	  <input class="fin updatename" type="text" name="mem_name" ><br>

         	  <label>주소</label>
         	  <input class="fin updateaddr1" type="text" name="mem_addr1"><br>

         	  <label>상세 주소</label>
         	  <input class="fin updateaddr2" type="text"  name="mem_addr2"><br>

         	  <label>연락처</label>
         	  <input class="fin updatehp" type="text" name="mem_hp"><br>
         	  <input class="fin updatememid" type="hidden" name="mem_id"><br>
         	  <br><br>
         	  <button type="button" id="bupdate" class="btn btn-success">수정완료</button>
           </form> 
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
	
</body>
</html>