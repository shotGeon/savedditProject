<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="board">
	<select id="selectAll" resultClass="boardVO">
		select * from board1 order by num desc
		
	</select>
	
	<select id="selectByPage" parameterClass="map" resultClass="boardVO">
		<![CDATA[
		select A.* from (
           select rownum as rnum, B.*  from (
           select * from board1 
             order by num desc) B
             where rownum <= #end#) A 
        where A.rnum >=#start#
       ]]>
			
	</select>
	
	<select id="getListCount" resultClass="int">
		select count(*) from board1
	</select>
	
	<insert id="insertBoard" parameterClass="boardVO">
		insert into board1 
		values(board1_num_seq.nextval, #subject#,
		       #writer#, #mail#, #password#,
		       #content#, 0, #wip#, sysdate)
		       
		<selectKey keyProperty="num" resultClass="int">
			select board1_num_seq.currval from dual
		</selectKey>

	</insert>
	
	<update id="replyHit" parameterClass="boardVO">
		update board1
		   set hit=#hit#
		   where num =#num#
	</update>
	
	<delete id="deleteBoard" parameterClass="int">
		delete board1 where num = #data#	
	</delete>
	
	<update id="updateBoard" parameterClass="boardVO">
		update board1
		   set
		     subject =#subject#,
		     mail = #mail#,
		     password = #password#,
		     content = #content#,
		     wip = #wip#,
		     wdate = sysdate
		   where
		     num = #num# 
	</update>
	
</sqlMap>
			